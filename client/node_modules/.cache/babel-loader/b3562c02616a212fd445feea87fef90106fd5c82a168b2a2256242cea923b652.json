{"ast":null,"code":"import React,{useEffect,useState}from\"react\";import axios from\"../utils/api\";import{useNavigate}from\"react-router-dom\";import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const Cart=()=>{const[cartItems,setCartItems]=useState([]);const[totalPrice,setTotalPrice]=useState(0);const navigate=useNavigate();useEffect(()=>{const fetchCart=async()=>{try{const token=localStorage.getItem(\"token\");console.log(\"Token fetched:\",token);// Debug\nif(!token){alert(\"Please log in to view your cart.\");navigate(\"/login\");return;}const response=await axios.get(\"/cart\",{headers:{Authorization:`Bearer ${token}`}});console.log(\"Cart Response:\",response.data);// Debug\nsetCartItems(response.data.cartItems);setTotalPrice(response.data.totalPrice);}catch(error){console.error(\"Error fetching cart:\",error);if(error.response&&error.response.status===401){alert(\"Session expired. Please log in again.\");navigate(\"/login\");}}};fetchCart();},[navigate]);const handleCheckout=()=>{if(cartItems.length===0){alert(\"Your cart is empty!\");return;}console.log(\"Navigating to checkout with:\",{cartItems,totalPrice});// Debug\nnavigate(\"/checkout\",{state:{cartItems,totalPrice}});};return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h1\",{children:\"Your Cart\"}),cartItems.length>0?/*#__PURE__*/_jsx(\"ul\",{children:cartItems.map((item,index)=>/*#__PURE__*/_jsxs(\"li\",{children:[\"Gown ID: \",item.gownId,\", Price: \\u20B1\",item.price,\", Start Date:\",\" \",new Date(item.startDate).toISOString(),\", End Date:\",\" \",new Date(item.endDate).toISOString()]},index))}):/*#__PURE__*/_jsx(\"p\",{children:\"Your cart is empty!\"}),/*#__PURE__*/_jsxs(\"h2\",{children:[\"Total Price: \\u20B1\",totalPrice]}),/*#__PURE__*/_jsx(\"button\",{onClick:handleCheckout,children:\"Proceed to Checkout\"})]});};export default Cart;","map":{"version":3,"names":["React","useEffect","useState","axios","useNavigate","jsx","_jsx","jsxs","_jsxs","Cart","cartItems","setCartItems","totalPrice","setTotalPrice","navigate","fetchCart","token","localStorage","getItem","console","log","alert","response","get","headers","Authorization","data","error","status","handleCheckout","length","state","children","map","item","index","gownId","price","Date","startDate","toISOString","endDate","onClick"],"sources":["C:/Users/ecaranto/Downloads/gown-booking-system with admin/client/src/pages/Cart.js"],"sourcesContent":["import React, { useEffect, useState } from \"react\";\r\nimport axios from \"../utils/api\";\r\nimport { useNavigate } from \"react-router-dom\";\r\n\r\nconst Cart = () => {\r\n  const [cartItems, setCartItems] = useState([]);\r\n  const [totalPrice, setTotalPrice] = useState(0);\r\n  const navigate = useNavigate();\r\n\r\n  useEffect(() => {\r\n    const fetchCart = async () => {\r\n      try {\r\n        const token = localStorage.getItem(\"token\");\r\n        console.log(\"Token fetched:\", token); // Debug\r\n\r\n        if (!token) {\r\n          alert(\"Please log in to view your cart.\");\r\n          navigate(\"/login\");\r\n          return;\r\n        }\r\n\r\n        const response = await axios.get(\"/cart\", {\r\n          headers: {\r\n            Authorization: `Bearer ${token}`,\r\n          },\r\n        });\r\n\r\n        console.log(\"Cart Response:\", response.data); // Debug\r\n        setCartItems(response.data.cartItems);\r\n        setTotalPrice(response.data.totalPrice);\r\n      } catch (error) {\r\n        console.error(\"Error fetching cart:\", error);\r\n        if (error.response && error.response.status === 401) {\r\n          alert(\"Session expired. Please log in again.\");\r\n          navigate(\"/login\");\r\n        }\r\n      }\r\n    };\r\n\r\n    fetchCart();\r\n  }, [navigate]);\r\n\r\n  const handleCheckout = () => {\r\n    if (cartItems.length === 0) {\r\n      alert(\"Your cart is empty!\");\r\n      return;\r\n    }\r\n\r\n    console.log(\"Navigating to checkout with:\", { cartItems, totalPrice }); // Debug\r\n    navigate(\"/checkout\", { state: { cartItems, totalPrice } });\r\n  };\r\n\r\n  return (\r\n    <div>\r\n      <h1>Your Cart</h1>\r\n      {cartItems.length > 0 ? (\r\n        <ul>\r\n          {cartItems.map((item, index) => (\r\n            <li key={index}>\r\n              Gown ID: {item.gownId}, Price: ₱{item.price}, Start Date:{\" \"}\r\n              {new Date(item.startDate).toISOString()}, End Date:{\" \"}\r\n              {new Date(item.endDate).toISOString()}\r\n            </li>\r\n          ))}\r\n        </ul>\r\n      ) : (\r\n        <p>Your cart is empty!</p>\r\n      )}\r\n      <h2>Total Price: ₱{totalPrice}</h2>\r\n      <button onClick={handleCheckout}>Proceed to Checkout</button>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Cart;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}